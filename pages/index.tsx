import {
  Box,
  Flex,
  Heading,
  SimpleGrid,
  Text,
  Grid,
  GridItem,
} from "@chakra-ui/react";
import Head from "next/head";
import { Link, Image } from "@chakra-ui/next-js";
import { GetStaticProps, InferGetStaticPropsType } from "next";
import axios from "axios";

import FeatureCard from "@/components/card/FeatureCard";
import StatCard from "@/components/card/StatCard";
import EventCard from "@/components/card/EventCard";
import TestimonialCard from "@/components/card/TestimonialCard";
import Crousal from "@/components/crousal/Crousal";
import {
  features,
  stats,
  testimonials,
  collabs,
  achievements,
} from "@/sampleData";
import { Event } from "@/types";
import AwardIcon from "@/components/icon/AwardIcon";

export const API_URL = process.env.NEXT_PUBLIC_API_URL;

export const getStaticProps: GetStaticProps<{
  events: Event[];
}> = async () => {
  let events = [];

  try {
    const res = await axios.get(`${API_URL}/event`);
    events = res.data.events;
    console.log(events);
    return { props: { events } };
  } catch (error: any) {
    console.log(error);
    return { props: { events } };
  }
};

export default function Home({
  events,
}: InferGetStaticPropsType<typeof getStaticProps>) {
  return (
    <>
      <Head>
        <title>MIC Organisation India | We Rise By Lifting Others</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link href="/logo.jpg" rel="icon"></link>
      </Head>
      <Box as="main">
        {/* hero section */}
        <Box
          as="section"
          position="relative"
          h={["50vh", "70vh", "90vh"]}
          bgImage={"url('./banner.jpg')"}
          bgSize="cover"
          bgPos="center"
          display="flex"
          alignItems="center"
          justifyContent="center"
        >
          <Heading
            as="h1"
            size={["md", "lg", "xl"]}
            backgroundColor="orange.300"
            w="fit"
            px={["20px", "24px", "30px"]}
            py={["10px", "12px", "15px"]}
            textAlign="center"
            background="blackAlpha.600"
            color="white"
          >
            Empowering Communities, <br /> Building a Better Society
          </Heading>
          <Heading
            position="absolute"
            bottom="5vh"
            left="0px"
            as="h3"
            size={["sm", "md", "lg"]}
            backgroundColor="orange.300"
            w="fit"
            p={["10px", "12px", "15px"]}
            textAlign="center"
            background="blue.500"
            color="white"
            borderEndEndRadius="10px"
          >
            <i> We Rise By Lifting Others</i>
          </Heading>
        </Box>

        {/* features section */}
        <Box as="section" my={["20px", "30px", "40px"]}>
          <Heading
            as="h1"
            size={["md", "lg", "xl"]}
            textAlign="center"
            mx={["20px", "30px", "40px"]}
            my={["20px", "30px", "40px"]}
          >
            Our Focus
          </Heading>
          <Flex
            direction="row"
            flexWrap="wrap"
            justifyContent="center"
            gap={["10px", "20px", "30px"]}
            mx={["20px", "30px", "40px"]}
          >
            {features.map((item, index) => {
              return (
                <FeatureCard
                  key={item.id}
                  featureDesc={item.featureDesc}
                  featureHeading={item.featureHeading}
                  featureSlogan={item.featureSlogan}
                  featureImage={item.featureImage}
                />
              );
            })}
          </Flex>
        </Box>

        {/* achivements */}
        <Box
          as="section"
          my={["20px", "30px", "40px"]}
          py={["10px", "20px", "30px"]}
          bg="blackAlpha.800"
        >
          <Heading
            as="h1"
            size={["md", "lg", "xl"]}
            textAlign="center"
            mb={["20px", "30px", "40px"]}
            color="white"
          >
            Achievements & Awards
          </Heading>

          <Grid
            templateRows={[
              "repeat(11, 1fr)",
              "repeat(11, 1fr)",
              "repeat(6, 1fr)",
            ]}
            templateColumns={[
              "repeat(1, 1fr)",
              "repeat(1, 1fr)",
              "repeat(2, 1fr)",
            ]}
            mx={["20px", "30px", "40px"]}
            color="white"
            columnGap="40px"
            rowGap={["10px", "10px", "20px"]}
            mb={["20px", "30px", "40px"]}
          >
            {achievements &&
              achievements.map((item) => {
                return (
                  <GridItem key={item.id}>
                    <Flex color="white" gap="10px">
                      <Box borderStartRadius="5px">
                        <AwardIcon />
                      </Box>
                      <Box fontSize={["xs", "sm", "md"]} borderEndRadius="5px">
                        <Text>{item.name}</Text>
                      </Box>
                    </Flex>
                  </GridItem>
                );
              })}
          </Grid>

          <Grid
            templateRows={["repeat(2, 1fr)", "repeat(1, 1fr)"]}
            templateColumns={["repeat(2, 1fr)", "repeat(4, 1fr)"]}
            gap={4}
            mx={["20px", "30px", "40px"]}
          >
            <GridItem p="20px" bgColor="white">
              <StatCard count={3000} heading="Drives" countColor="red.500" />
            </GridItem>
            <GridItem bgColor="white" p="20px">
              <StatCard count={100} heading="Events" countColor="red.500" />
            </GridItem>
            <GridItem bgColor="white" p="20px">
              <StatCard count={300} heading="Volunteers" countColor="red.500" />
            </GridItem>
            <GridItem bgColor="white" p="20px">
              <StatCard count={50} heading="Blood Camps" countColor="red.500" />
            </GridItem>
          </Grid>
        </Box>

        {/* events section */}
        {events.length !== 0 && (
          <Box
            as="section"
            my={["20px", "30px", "40px"]}
            mx={["20px", "30px", "40px"]}
          >
            <Heading
              as="h1"
              size={["md", "lg", "xl"]}
              textAlign="center"
              mb={["20px", "30px", "40px"]}
            >
              Recent Events
            </Heading>
            <SimpleGrid
              spacing={4}
              templateColumns="repeat(auto-fill, minmax(300px, 1fr))"
            >
              {events.map((item) => {
                return (
                  <EventCard
                    key={item._id}
                    eventName={item.eventName}
                    eventDesc={item.eventDesc}
                    eventPoster={item.eventPoster}
                    eventDate={item.eventDate}
                    eventLocation={item.eventLocation}
                  />
                );
              })}
            </SimpleGrid>
          </Box>
        )}

        {/* testimonials section */}
        {testimonials.length !== 0 && (
          <Box
            as="section"
            my={["20px", "30px", "40px"]}
            py={["10px", "20px", "30px"]}
            bg="blackAlpha.800"
            color="white"
          >
            <Heading
              as="h1"
              size={["md", "lg", "xl"]}
              textAlign="center"
              mb={["20px", "30px", "40px"]}
            >
              Testimonials
            </Heading>
            <SimpleGrid
              spacing={4}
              templateColumns="repeat(auto-fill, minmax(300px, 1fr))"
              mx={["20px", "30px", "40px"]}
            >
              {testimonials.map((item) => {
                return (
                  <TestimonialCard
                    key={item.id}
                    profilePhoto={item.profilePhoto}
                    personName={item.personName}
                    designation={item.designation}
                    message={item.message}
                  />
                );
              })}
            </SimpleGrid>
          </Box>
        )}

        {/* supporters section */}
        <Box as="section" my={["20px", "30px", "40px"]}>
          <Heading
            as="h1"
            size={["md", "lg", "xl"]}
            textAlign="center"
            mb={["20px", "30px", "40px"]}
          >
            Our Suppoters
          </Heading>
          <Box>
            <Crousal totalItems={11} itemWidth={100} gap={60}>
              {collabs.map((item) => {
                return (
                  <Flex key={item.id} w="100px" flex="none" alignItems="center">
                    <Box>
                      <Image
                        w="full"
                        src={item.logo}
                        alt="collab"
                        borderRadius="10px"
                      />
                    </Box>
                  </Flex>
                );
              })}
            </Crousal>
          </Box>
        </Box>

        {/* join section */}
        <Box
          as="section"
          p="30px"
          mt={["20px", "30px", "40px"]}
          bgColor="gray.300"
          color="gray.800"
        >
          <Flex align="center" justify="center" gap="30px" flexWrap="wrap">
            <Text fontSize={["lg", "xl", "3xl"]} textAlign="center">
              Together, We Can Change the World!
            </Text>
            <Box>
              <Link
                mx="auto"
                w="150px"
                px="30px"
                py="20px"
                border="1px"
                borderColor="blue.500"
                bgColor="blue.500"
                color="white"
                cursor="pointer"
                mt="20px"
                sx={{
                  transition: "all 100ms ease-in-out",
                  ":hover": {
                    bgColor: "white",
                    color: "blue.500",
                  },
                }}
                fontSize={["lg", "xl", "3xl"]}
                href="/join"
              >
                Join Us
              </Link>
            </Box>
          </Flex>
        </Box>
      </Box>
    </>
  );
}
